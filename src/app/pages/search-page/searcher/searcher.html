@let hasGenres = searchStateService.hasGenres();
@let hasYear = searchStateService.hasYear();
@let hasOptions = searchStateService.hasOptions();
@let hasName = searchStateService.hasName();

<header 
    class="searchFilms__searcher" 
    #searcherExpander 
    [style.height]="searchExpanderHeight() + 'px'"
>
    <!-- SEARCHER EXPANDER -->
    <button 
        class="searcher__expander" 
        (click)="toggleSearchExpander()"
        id="searcher-expander-button"
    >   
        <!-- SEARCHER SEARCH INFO -->
        <div class="searcher__info">
            @if(hasOptions){
                <span class="searcher__indicator"></span>

                @let genres = searchStateService.genreIdsToText();
                @if(hasGenres && genres){
                    <span class="searcher__resume">{{'Género: ' + genres }}</span>
                }
                
                @if(hasYear && searchStateService.selectedYear()){
                    <span class="searcher__resume">{{'Año: ' + searchStateService.selectedYear()}}</span>
                }

                @if(hasName && searchStateService.selectedName()){
                    <span class="searcher__resume">{{'Nombre: ' + searchStateService.selectedName()}}</span>
                }
                
            }@else {
                <span class="searcher__resume">Viendo listado completo</span>
            }
        </div>
        
        <!-- SEARCHER EXPAND ICON-->
        <svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px" [attr.fill]="themeService.theme() === 'light' ?'#ffffff' : '#000000'" [class.isOpen]="isOpen()">
            <path d="M256-213.85 213.85-256l224-224-224-224L256-746.15l224 224 224-224L746.15-704l-224 224 224 224L704-213.85l-224-224-224 224Z"/>
        </svg>

    </button>

    <!-- SEARCHER OPTIONS -->
    <section class="searcher__options" [attr.aria-hidden]="!isOpen()">
        <app-search-by-title [isOpen]="isOpen()"/>
        <app-search-by-filters [isOpen]="isOpen()"/>
    </section>

</header>
