@let genres = searchStateService.genreList();
@let searchState = searchStateService;

<form class="searchByFilters">
    
    <!-- GENRE FILTER -->
    <fieldset class="searchByFilters__genresFilter">
        <legend class="genresFilter__title">Por género: </legend>
        @for (genre of genres; track $index) {
            <label class="genresFilter__genreContainer">
                <input 
                    type="checkbox"
                    [value]="genre.id"
                    class="genresFilter__genreCheckbox"
                    [checked]="searchStateService.selectedGenreIds().includes(genre.id)"
                    [id]="genre.id"
                    #genreCheckbox
                    (change)="searchState.setSelectedGenres(genre.id)"
                />
                <span class="genresFilter__genreName">{{genre.name}}</span>
            </label>
        }
    </fieldset>

    <!-- YEAR FILTER -->
    <fieldset class="searchByFilters__yearFilter">
        <legend class="yearFilter__title">Por año: </legend>
            <input 
                type="number" 
                class="yearFilter__yearCheckbox"
                [value]="searchState.selectedYear()"
                (input)="searchState.setSelectedYear($event)"
                placeholder="Año"
            >
        
    </fieldset>
    
    <!-- APPLY FILTER BUTTON -->
    <div class="buttonContainer">
        <app-button
            label="Buscar"
            (handleClick)="searchState.searchByfilters()"
        />
    </div>
    
</form>


